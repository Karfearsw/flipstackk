This document serves as a comprehensive guide for generating AI prompts to facilitate the end-to-end development and deployment of the Flipstackk 3.0 project. It covers key stages including GitHub repository setup, Vercel deployment, and Supabase integration, ensuring that AI models can effectively assist in building this real estate wholesaling CRM. The guide is structured to provide clear, actionable instructions for AI, drawing directly from the provided project brief and technical specifications.

## 1. Project Overview and Setup

### 1.1. Project Brief Summary

To effectively assist in the development of Flipstackk 3.0, the AI must first comprehend the project's foundational aspects. This includes understanding its core purpose as a comprehensive real estate wholesaling CRM, designed to streamline deal management from lead intake to closing. Key user personas, such as **Wholesalers**, **Acquisition Managers**, and **Dispo/Buyer Relations** teams, each have distinct goals and pain points that the platform aims to address. The primary problems Flipstackk 3.0 seeks to solve include disjointed workflows, lack of data centralization, inefficient lead management, suboptimal offer generation, poor buyer management, and limited performance visibility. The project aims to centralize deal information, automate lead processes, streamline pipelines, generate professional offers, manage a comprehensive buyer CRM, perform quick deal analysis, track tasks, and monitor KPIs through reporting dashboards. The target market consists of real estate wholesalers across the United States. Success metrics include increased lead conversion, reduced deal cycle time, improved team efficiency, higher offer acceptance rates, increased buyer engagement, and overall user satisfaction. The unique value proposition of Flipstackk 3.0 lies in its highly focused, intuitive, and efficient CRM specifically tailored for real estate wholesaling, combining robust lead management, deal tracking, offer generation, and buyer management within a user-friendly interface.

**AI Prompt Example:**

```
"Summarize the core purpose, target users, key problems solved, and unique value proposition of Flipstackk 3.0 based on the provided project brief. Highlight the main goals and pain points for each user persona (Wholesalers, Acquisition Managers, Dispo/Buyer Relations)."
```

### 1.2. Technical Stack Confirmation

The technical foundation of Flipstackk 3.0 is critical for its development. The preferred technical stack, categorized as 'Mode B - Modern', includes Next.js 14 (App Router) with TypeScript, Tailwind CSS, and shadcn/ui for the frontend. The backend will utilize Node.js with tRPC for type-safe API development, or Express.js for a more traditional REST API. PostgreSQL will serve as the database, managed with Prisma ORM for data modeling and migrations. React Query will handle state management for efficient data fetching, caching, and synchronization. Future automations are planned with a queueing system, such as Redis-backed solutions. Authentication will primarily use NextAuth Credentials (username/password), with demo users for initial setup and robust security measures including password hashing (bcrypt), session persistence, secure cookies, CSRF protection, and CORS configuration. Role-Based Access Control (RBAC) will support `admin`, `acquisitions`, `caller`, and `investor` roles, with protected API routes and UI guards. An API endpoint `GET /api/me` will return `{ id, username, role }` upon successful authentication.

**AI Prompt Example:**

```
"List the complete technical stack for Flipstackk 3.0, specifying technologies for frontend, backend, database, ORM, state management, and authentication. Describe the authentication requirements, including the chosen provider, security measures, and supported RBAC roles."
```

### 1.3. Initial Repository Setup (GitHub)

The initial setup of the GitHub repository involves creating the foundational project structure and configuration files necessary for a Next.js application with TypeScript, Tailwind CSS, and Prisma. This includes initializing a Git repository, setting up a `package.json` file with essential dependencies, configuring `tsconfig.json` for TypeScript, and establishing basic Tailwind CSS and PostCSS configurations. The `.gitignore` file should be properly configured to exclude sensitive information and build artifacts. This step ensures a consistent and reproducible development environment.

**AI Prompt Example:**

```
"Generate the initial file structure and content for a new Next.js 14 project with TypeScript, Tailwind CSS, and Prisma. Include `package.json` with recommended dependencies, `tsconfig.json`, `tailwind.config.ts`, `postcss.config.js`, and a comprehensive `.gitignore` file. Provide commands for Git initialization and initial commit."
```

## 2. Frontend Development (Next.js, TypeScript, Tailwind CSS, shadcn/ui)

### 2.1. Core Layout and Navigation

The application's core layout and navigation are crucial for user experience. The global navigation will include items such as Dashboard, Leads, Calls, Team, Property Map, Calculator, Timesheet, Analytics, Documentation, and Settings. The AI should assist in creating a responsive layout that adapts to various screen sizes, utilizing Tailwind CSS for styling and shadcn/ui components for a modern aesthetic. This involves defining a root layout, header, sidebar (if applicable), and main content area, ensuring accessibility and intuitive navigation across the platform.

**AI Prompt Example:**

```
"Design and implement the core responsive layout for Flipstackk 3.0 using Next.js 14 App Router, TypeScript, Tailwind CSS, and shadcn/ui. Include a header with a logo and user profile dropdown, and a sidebar containing the global navigation items: Dashboard, Leads, Calls, Team, Property Map, Calculator, Timesheet, Analytics, Documentation, and Settings. Ensure the layout is fully responsive and accessible."
```

### 2.2. Component Generation

Generating UI components based on the project's must-have features is a key development task. The AI should be prompted to create specific components using shadcn/ui and Tailwind CSS, adhering to the design system. Examples include a `Lead Intake Form` with fields for owner info, timeline, condition, price, and motivation; a `Status Pipeline UI` to manage lead stages (New → Contacted → Qualified → Offer Sent → Under Contract → Assigned → Closed); and an `Offer Generator` interface for creating offers with templates, e-sign placeholders, and PDF export functionality. Each component should be modular, reusable, and follow best practices for React development.

**AI Prompt Example:**

```
"Create a React component for the 'Lead Intake Form' in Flipstackk 3.0 using TypeScript, Tailwind CSS, and shadcn/ui. The form should include input fields for 'Owner Information', 'Property Address', 'Timeline to Sell', 'Property Condition', 'Asking Price', and 'Seller Motivation'. Implement form validation and state management for input fields. Provide the component code and any necessary styling."
```

### 2.3. State Management Integration

Efficient state management is vital for a data-intensive application like Flipstackk 3.0. React Query will be used for data fetching, caching, and synchronization, reducing boilerplate and improving performance. The AI should be prompted to integrate React Query into components that interact with the backend API, defining appropriate queries and mutations for various data operations. This includes setting up query clients, providers, and demonstrating how to fetch and update data for features like lead lists, buyer profiles, and analytics dashboards.

**AI Prompt Example:**

```
"Demonstrate how to integrate React Query for state management in a Next.js component that fetches a list of leads from a `/api/leads` endpoint. Provide examples of defining a query, displaying loading and error states, and invalidating queries after a successful lead update or creation. Assume a basic tRPC or Express.js backend for the API."
```

## 3. Backend Development (Node.js, tRPC/Express.js, Prisma, PostgreSQL)

### 3.1. Database Schema Definition (Prisma)

Defining a robust PostgreSQL database schema using Prisma ORM is fundamental for Flipstackk 3.0. The AI should be prompted to create the Prisma schema (`schema.prisma`) based on the project's entities. This includes models for `User` (with roles), `Lead` (with detailed properties like owner info, status, notes), `Property` (address, type, condition), `Buyer` (profile, buy boxes, proof-of-funds), `Offer`, `Task`, and `Analytics` data. Relationships between these models (e.g., one-to-many, many-to-many) should be clearly defined, along with appropriate data types, unique constraints, and default values. Migrations should also be considered for schema evolution.

**AI Prompt Example:**

```
"Generate a Prisma schema (`schema.prisma`) for Flipstackk 3.0, including models for `User`, `Lead`, `Property`, and `Buyer`. Define appropriate fields for each model, specifying data types, relationships (e.g., a Lead has one Property, a User can have many Leads), and any necessary unique constraints or default values. Include an `enum` for user roles (admin, acquisitions, caller, investor) and lead statuses."
```

### 3.2. API Endpoint Creation

Creating API endpoints for CRUD operations is essential for backend functionality. The AI should be prompted to develop API routes using either tRPC or Express.js, depending on the chosen backend framework. For instance, endpoints for managing leads (`/api/leads`), users (`/api/users`), and buyer profiles (`/api/buyers`) are required. Each endpoint should handle requests (GET, POST, PUT, DELETE) and interact with the Prisma ORM to perform database operations. Error handling, input validation, and proper response formatting are crucial aspects to include.

**AI Prompt Example (tRPC):**

```
"Develop a tRPC router and procedures for managing 'Leads' in Flipstackk 3.0. Include procedures for `getAllLeads`, `getLeadById`, `createLead`, `updateLead`, and `deleteLead`. Each procedure should interact with the Prisma ORM to perform the corresponding database operation. Ensure input validation for `createLead` and `updateLead`."
```

**AI Prompt Example (Express.js):**

```
"Create Express.js API routes for managing 'Leads' in Flipstackk 3.0. Implement routes for `GET /api/leads`, `GET /api/leads/:id`, `POST /api/leads`, `PUT /api/leads/:id`, and `DELETE /api/leads/:id`. Each route should use Prisma ORM to interact with the PostgreSQL database. Include basic error handling and request body validation."
```

### 3.3. Authentication and Authorization

Implementing robust authentication and authorization is a critical security requirement. The AI should be prompted to set up NextAuth with the Credentials provider, managing user login, session creation, and secure cookie handling. Password hashing using bcrypt is mandatory for storing user credentials. Role-Based Access Control (RBAC) needs to be implemented to protect API routes and UI elements based on user roles (`admin`, `acquisitions`, `caller`, `investor`). This involves creating middleware or decorators to check user roles before allowing access to specific resources or functionalities. The `GET /api/me` endpoint should return `{ id, username, role }` for authenticated users.

**AI Prompt Example:**

```
"Implement NextAuth with the Credentials provider for Flipstackk 3.0. Detail the setup for user login, session management, and secure cookie handling. Demonstrate how to hash passwords using bcrypt before storing them in the database. Provide an example of protecting an API route (e.g., `POST /api/leads`) to ensure only users with 'admin' or 'acquisitions' roles can create new leads. Include the implementation for the `GET /api/me` endpoint."
```

## 4. Supabase Integration

### 4.1. Database Migration

While PostgreSQL is the chosen database, Supabase offers a managed PostgreSQL service along with additional features. The AI should be prompted to outline the process for migrating the local PostgreSQL database to Supabase. This involves creating a new project in Supabase, obtaining connection details, and using tools like `pg_dump` and `psql` or Supabase's migration tools to transfer the schema and data. This step ensures the database is hosted in a scalable and managed environment.

**AI Prompt Example:**

```
"Provide a step-by-step guide for migrating an existing PostgreSQL database schema and data to Supabase. Include commands for dumping the local database, creating a new Supabase project, and restoring the database to Supabase. Explain any necessary adjustments for Supabase-specific configurations."
```

### 4.2. Authentication Integration

Supabase Auth can be used either as a primary authentication solution or to complement NextAuth, especially for features like social logins or magic links. If Supabase Auth is chosen as the primary, the AI should be prompted to integrate it into the Next.js application. This involves configuring the Supabase client, handling user sign-up, sign-in, and session management. If NextAuth remains primary, prompts could focus on how Supabase Auth might be used for specific secondary authentication flows.

**AI Prompt Example (Supabase Auth as Primary):**

```
"Integrate Supabase Auth into the Flipstackk 3.0 Next.js application. Provide code examples for user sign-up, sign-in, and session management using the Supabase client library. Explain how to protect routes based on Supabase authentication status."
```

### 4.3. Realtime Features (Optional)

Supabase Realtime can provide live updates for certain features, enhancing the user experience. For instance, real-time notifications for new leads or updates to deal statuses could be beneficial. The AI should be prompted to demonstrate how to leverage Supabase Realtime for a specific feature, such as subscribing to changes in the `leads` table and updating the UI dynamically. This would involve setting up a real-time client and handling incoming events.

**AI Prompt Example:**

```
"Demonstrate how to implement a real-time feature in Flipstackk 3.0 using Supabase Realtime. Specifically, show how to subscribe to changes in the 'leads' table and display a real-time notification in the Next.js frontend whenever a new lead is created or an existing lead's status is updated."
```

## 5. Deployment (Vercel)

### 5.1. Vercel Project Setup

Deploying the Next.js application to Vercel is a straightforward process, but specific configurations are often required. The AI should be prompted to outline the steps for setting up the Flipstackk 3.0 project on Vercel. This includes linking the GitHub repository, configuring build settings (if custom commands are needed), and ensuring the correct framework preset is selected. The guide should emphasize the ease of deployment with Vercel for Next.js applications.

**AI Prompt Example:**

```
"Provide a step-by-step guide for deploying the Flipstackk 3.0 Next.js application to Vercel. Detail the process of linking a GitHub repository, configuring build and output settings, and initiating the first deployment. Include any Vercel-specific configuration files (e.g., `vercel.json`) if necessary."
```

### 5.2. Environment Variables

Managing environment variables securely is crucial for production deployments. The AI should be prompted to explain how to configure and manage environment variables on Vercel, such as database connection strings, API keys, and authentication secrets. This includes using Vercel's dashboard for setting environment variables and accessing them within the Next.js application. Emphasis should be placed on keeping sensitive information out of the codebase.

**AI Prompt Example:**

```
"Explain how to securely manage environment variables for Flipstackk 3.0 on Vercel. Provide instructions for adding sensitive variables (e.g., `DATABASE_URL`, `NEXTAUTH_SECRET`) via the Vercel dashboard and accessing them within the Next.js application. Discuss best practices for local development environment variables (`.env.local`)."
```

### 5.3. Continuous Deployment

Setting up continuous deployment (CD) from GitHub to Vercel ensures that every push to the main branch automatically triggers a new deployment. The AI should be prompted to describe how to configure this workflow. This involves ensuring the GitHub repository is correctly linked to Vercel and understanding how Vercel automatically detects changes and initiates builds. The guide should highlight the benefits of CD for rapid iteration and reliable deployments.

**AI Prompt Example:**

```
"Describe the process of setting up continuous deployment for Flipstackk 3.0 from GitHub to Vercel. Explain how Vercel automatically detects changes in the linked GitHub repository and triggers new deployments. Discuss the benefits of this workflow for development and release cycles."
```

## 6. Testing and Quality Assurance

### 6.1. Unit and Integration Tests

Ensuring the quality and reliability of Flipstackk 3.0 requires comprehensive testing. The AI should be prompted to generate basic unit and integration tests for both frontend components and backend API endpoints. For the frontend, this might involve using testing libraries like Jest and React Testing Library to test component rendering and user interactions. For the backend, tests could verify API endpoint functionality, database interactions via Prisma, and authentication logic. The goal is to establish a testing foundation that can be expanded upon.

**AI Prompt Example:**

```
"Generate a basic unit test for a React component (e.g., the 'Lead Intake Form') in Flipstackk 3.0 using Jest and React Testing Library. The test should verify that the component renders correctly and that user input can be simulated. Additionally, provide an example of an integration test for a backend API endpoint (e.g., `POST /api/leads`) using a testing framework like Supertest, verifying successful lead creation and appropriate error handling."
```

### 6.2. Seed Data

Providing seed data is essential for local development, testing, and demonstrating the application's functionality. The AI should be prompted to create a script or instructions for generating seed data for the Flipstackk 3.0 database. This includes populating the `User`, `Lead`, `Property`, and `Buyer` tables with realistic, yet dummy, data. The seed data should cover various scenarios, including different user roles, lead statuses, and buyer preferences, to fully exercise the application.

**AI Prompt Example:**

```
"Create a Prisma seeding script (`seed.ts`) for Flipstackk 3.0. The script should populate the `User`, `Lead`, `Property`, and `Buyer` tables with at least 5 realistic dummy entries each. Ensure that users include different roles (admin, acquisitions, caller) and leads cover various statuses. Provide instructions on how to run the seeding script."
```

## 7. Documentation

### 7.1. API Documentation

Clear API documentation is vital for both frontend developers consuming the backend and for future maintenance. The AI should be prompted to generate basic API documentation for the Flipstackk 3.0 backend. This could involve using tools like Swagger/OpenAPI (if Express.js is used) or generating documentation directly from tRPC's type definitions. The documentation should describe the available endpoints, their request/response formats, authentication requirements, and example usage.

**AI Prompt Example (tRPC):**

```
"Explain how to generate API documentation for a tRPC backend in Flipstackk 3.0, leveraging tRPC's type safety and inference capabilities. Provide an example of how the documentation would describe the 'Leads' router and its procedures, including input schemas and expected output types."
```

**AI Prompt Example (Express.js with Swagger):**

```
"Generate basic Swagger/OpenAPI documentation for the 'Leads' API routes (`/api/leads`) in an Express.js backend for Flipstackk 3.0. Include descriptions for `GET`, `POST`, `PUT`, and `DELETE` endpoints, specifying request parameters, request bodies, response schemas, and authentication requirements. Provide the necessary annotations or configuration for Swagger UI integration."
```

### 7.2. Authentication Documentation

As specified in the project brief, a `/docs/auth-simplest.md` page is required to provide ready-to-run authentication implementations. The AI should be prompted to create this documentation page, offering copy-paste server and client snippets for different authentication methods. While NextAuth Credentials is the default, the documentation should ideally include examples for Express Sessions, NextAuth Credentials, and JWT, as suggested in the brief, to offer flexibility and demonstrate various approaches.

**AI Prompt Example:**

```
"Create the content for the `/docs/auth-simplest.md` documentation page for Flipstackk 3.0. The page should provide ready-to-run, copy-paste server and client snippets for three authentication implementations: Express Sessions, NextAuth Credentials, and JWT. For each implementation, include basic setup instructions, example login/logout functions, and how to protect routes. Ensure the documentation is clear, concise, and easy to follow."
```

